# 18 네트워크 프로그래밍
## 18-1 스마트폰 정보 구하기
### 전화 상태 변화 감지하기
- `PhoneStateListener` : Android 12에서 deprecated 됨
- `TelephonyCallback` : `TelephonyManager`에 등록하면 상태가 변화했을 때 `TelephonyCallback` 함수가 자동으로 호출됨

스마트폰 상태 퍼미션
```Kotlin
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
```

네트워크 제공 국가, 사업자, 전화번호 얻기 - `TelephonyManager`
- `getNetworkContryIso()` : 네트워크 제공 국가
- `getNetworkOperatorName()` : 네트워크 제공 사업자

사용자 전화번호를 읽는 퍼미션
```Kotlin
<uses-permission android:name="android.permission.READ_PHONE_NUMBERS" />
```

네트워크 접속 정보 - `ConnectivityManager`
- 1. `getActiveNetwork()` 이용하는 방법
  ```Kotlin
  <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
  ```
  - `ConnectivityManager`의 `getActiveNetwork()`로 `Network` 객체를 얻어서 사용함
  - `activityNetwork` 정보가 Null : 현재 스마트폰은 네트워크에 접속할 수 없음
  - `getNetworkCapabilities()`의 매개변수로 지정 시 현재 접속된 네트워크의 정보를 얻을 수 있음

- 2. `requestNetwork()` 이용하는 방법
  ```Kotlin
  <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
  ```
  - 네트워크 타입 지정 후 `requestNetwork()`로 넘어가 `onAvailable()`이 호출되면 지정한 타입의 네트워크가 가능하다는 의미임
