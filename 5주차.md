# 13-1 인텐트 이해하기
## 인텐트란?
- `intent` : component를 실행하려고 시스템에 전달하는 메시지 (기능 수행 함수를 제공하는 클래스가 아닌, data를 담는 클래스)
  - component를 실행하는 정보가 담긴 intent 객체를 시스템에 전달하면 component가 실행됨
  - 안드로이드의 component 클래스는 시스템이 생성해서 실행하는 클래스이므로 개발자가 작성하는 코드로 생명주기를 관리할 수 없음
    ㄴ 4대 component에 개발자가 작성하는 activity 외에도 broadcast reciever 등이 있으니까 그말인듯...?
    => 따라서 시스템에 intent를 전달해줌 -> 시스템에서 intent의 정보를 분석 -> 그에 맞는 컴포넌트를 실행

  - 외부앱도 마찬가지임
    
---
시스템에 component를 알리기 위해 manifest 파일에 정보를 등록함
- activity는 manifest에 등록해서 사용
  - `<activity>` 태그로 각 activity class를 등록
  - activity 클래스 이름을 지정하는 name 속성은 생략 불가능함
- 4대 component 모두 manifest에 등록해야 함

```kotlin
val intent: Intent = Intent(this, DetailActivity::class.java)
startActivity(intent)
```
- `startActivity()` : intent를 시스템에 전달(시작)함
- `DetailActivity::class.java` : 클래스 타입 referrence 정보

---
## 인텐트 엑스트라 데이터
- 함수를 호출하며 parameter로 데이터를 넘기는 방법 -> 불가능함
  - component 객체는 시스템이 생성하므로 개발자 코드로는 직접 접근할 수 없음
- `extra data`(intent에 담는 부가정보)를 이용하는 방법
  - `MainActivity`에서 intent에 extra data를 추가해서 전달 -> `DetailActivity`에서 intent에 담긴 extra data를 가져옴
  - ```Kotlin
    public Intent putExtra(String name, CharSequence value)
    ```
    
  - intent에 데이터 추가하기
    ```Kotlin
    val intent: Intent = Intent(this, DetailActivity::class.java)
    intent.putExtra("data1", "hello")
    intent.putExtra("data2", 10)
    startActivity(intent)
    ```
  - extra 데이터 가져오기
    ```Kotlin
    val data1 = intent.getStringExtra("data1")
    val data2 = intent.getIntExtra("data2", 0)
    ```
  - 데이터 추가 / 가져오기 모두 여러 타입에 따라 다양하게 가능함

  - 액티비티 화면 되돌리기 - ActivityResultLauncher
    - 사후 처리가 필요 없는 경우
      - 이메일 앱 목록 화면에서 상세보기 화면으로 전환했다가 되돌아왔을 때
      - `startActivity()`
    - 사후 처리가 필요한 경우
      - 카톡 프로필 설정 화면에서 갤러리 앱의 목록을 띄운 후 다시 설정 화면으로 돌아올 때 갤러리에서 사용자가 선택한 사진을 프로필 사진으로 등록해야 하는 경우
      - `startActivityForResult()`, `ActivityResultLauncher` (android ver 11부터 권장)
      - ```Kotlin
        intent.putExtra("resultData", "world")
        setResult(RESULT_OK, intent)
        finish()
        ```
      - `finish()` 호출 이전에 결과 데이터를 intent 객체에 담을 수 있음
      - `setResult()` : 결과를 어떻게 되돌릴지 지정
        - `RESULT_OK` : 요청을 제대로 처리함
        - `RESULT_CANCELED` : 요청을 제대로 처리하지 않음
        ??? RESULT_CANCELED를 쓰는 경우는 ???

      - `ActivityResultLauncher`를 사용해 액티비티를 실행시키는 방법
        - intent를 발생시켜 화면 전환 -> 되돌아왔을 때 `ActivityResultLauncher` 로 사후 처리하는 방법
        - `Contract` (요청의 실행자) -> `ActivityResultLauncher` (`Contract`와 `Callback` 등록) -> `launch` (요청 발생)

